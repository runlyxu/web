<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>异步双蝶飞舞</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            background: linear-gradient(160deg, #b3d9ff 20%, #8ab5ff 80%);
            overflow: hidden;
        }

        .butterfly {
            position: absolute;
            width: 120px;
            opacity: 0.95;
            transform-origin: center;
        }

        .left-wing {
            animation: flapL 2.8s ease-in-out infinite;
            transform-origin: 100% 50%;
        }
        .right-wing {
            animation: flapR 2.8s ease-in-out infinite;
            transform-origin: 0% 50%;
        }

        @keyframes flapL {
            0%,100% { transform: rotateY(0deg); }
            50% { transform: rotateY(40deg); }
        }
        @keyframes flapR {
            0%,100% { transform: rotateY(0deg); }
            50% { transform: rotateY(-40deg); }
        }

        #butterfly1 { filter: drop-shadow(0 0 8px #d8bfd899); }
        #butterfly2 { filter: drop-shadow(0 0 8px #ff809599); }
    </style>
</head>
<body>
    <!-- 蝴蝶1 -->
    <div id="butterfly1" class="butterfly">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 442 429">
            <defs>
                <linearGradient id="grad1">
                    <stop offset="0%" stop-color="#d8bfd8"/>
                    <stop offset="100%" stop-color="#b19cd9"/>
                </linearGradient>
            </defs>
            <g class="left-wing">
                <path fill="url(#grad1)" d="M42.56,2.5c-8.1,6.9-11.3,21.2-16.1,71-3.9,41.1-6.6,57.7-13.6,83-2.9,10.5-3.5,14.1-3.1,18.9,1.6,17.6,20.9,37.3,52.2,53.3,13.2,6.7,39.3,17,58,22.8,15.2,4.7,45.5,12.5,48.6,12.5,2.4,0,2.9-3.9,2.9-24.9,0-39.9-7-88.3-16.9-118.2-11.4-33.9-28.4-59-64.1-94.8C71.96,7.7,60.36,0,50.96,0c-4.3,0-6,.5-8.4,2.5Z"/>
                <path fill="url(#grad1)" d="M32.76,237.1c-8.9,2.6-22.4,26.1-28.7,49.9-6.4,24.2-5.2,44.6,3.4,56.3,15.6,21.2,52,13.3,107-23.2,12.3-8.1,27.6-20.9,37.6-31.2,8.2-8.5,16.5-19,15.8-20.1-0.3-0.4-2.1-0.8-4.1-0.8-5.3,0-23.5-4.8-56-14.9-46.7-14.5-66.1-18.6-75-16Z"/>
            </g>
            <g class="right-wing">
                <path fill="url(#grad1)" d="M405.16,119c-20.1,2.3-56.1,10.1-72.2,15.7-29.1,10.1-53,25.5-79.6,51.1-14.6,14-31.7,32.8-43.9,48.2-9.9,12.5-24.2,33.8-23.7,35.4,0.4,1.3,26.4,12,41.3,17,15.7,5.3,56,15.2,69.2,17,6.2,0.9,17.7,1.6,25.5,1.6,27.2,0,42.9-6.5,50.5-20.8,1.8-3.3,3.2-6.6,3.2-7.3,0-2.4,11.2-29.4,17.2-41.4,3.3-6.6,13.7-25.5,23.1-42,23.1-40.7,28.1-52.3,26.2-62.1-0.9-4.8-5.9-9.9-11.1-11.3-6.1-1.5-17.1-2-25.7-1.1Z"/>
                <path fill="url(#grad1)" d="M184.86,285.1c1.7,29,12.1,63.5,29.2,96.9,7.8,15.3,14.8,25.5,23.3,34.1,10,9.9,16.8,13.4,26.6,13.4s15-2.8,24-11.9c16.2-16.5,28.5-49.1,28.5-75.6,0-9.6-1.4-14-5.2-17.2-4-3.4-19-11.2-31.8-16.6-18.3-7.8-84-31.7-92.9-33.9l-2.4-0.6.7,11.4Z"/>
            </g>
            <path fill="url(#grad1)" d="M189.66,216.6c-1.2,0.8-2.2,2.5-2.2,3.8,0,1.2-1.2,3.8-2.6,5.7-4.6,6.2-6.3,10.5-7.4,19.5-2,15.2-3.7,20.9-10.8,35.1-10.1,20.3-11.2,23.9-11.1,38.1,0.1,17,0.3,17.2,7.7,7.8,3.4-4.2,7.3-9.6,8.6-11.9,3.2-5.4,6.1-16.6,8.1-31.2,1.8-13.4,3.7-18.9,11.2-33.2,5-9.8,5.3-10.7,5.3-17.7,0-4.1,0.5-7.8,1-8.1,1.7-1,1.1-6.1-0.8-7.8-2.3-2.1-4.1-2.1-7,0.1Z"/>
        </svg>
    </div>

    <!-- 蝴蝶2 -->
    <div id="butterfly2" class="butterfly" style="opacity:0;">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 442 429">
            <defs>
                <linearGradient id="grad2">
                    <stop offset="0%" stop-color="#ffb3ba"/>
                    <stop offset="100%" stop-color="#ff8095"/>
                </linearGradient>
            </defs>
            <g class="left-wing">
                <path fill="url(#grad2)" d="M42.56,2.5c-8.1,6.9-11.3,21.2-16.1,71-3.9,41.1-6.6,57.7-13.6,83-2.9,10.5-3.5,14.1-3.1,18.9,1.6,17.6,20.9,37.3,52.2,53.3,13.2,6.7,39.3,17,58,22.8,15.2,4.7,45.5,12.5,48.6,12.5,2.4,0,2.9-3.9,2.9-24.9,0-39.9-7-88.3-16.9-118.2-11.4-33.9-28.4-59-64.1-94.8C71.96,7.7,60.36,0,50.96,0c-4.3,0-6,.5-8.4,2.5Z"/>
                <path fill="url(#grad2)" d="M32.76,237.1c-8.9,2.6-22.4,26.1-28.7,49.9-6.4,24.2-5.2,44.6,3.4,56.3,15.6,21.2,52,13.3,107-23.2,12.3-8.1,27.6-20.9,37.6-31.2,8.2-8.5,16.5-19,15.8-20.1-0.3-0.4-2.1-0.8-4.1-0.8-5.3,0-23.5-4.8-56-14.9-46.7-14.5-66.1-18.6-75-16Z"/>
            </g>
            <g class="right-wing">
                <path fill="url(#grad2)" d="M405.16,119c-20.1,2.3-56.1,10.1-72.2,15.7-29.1,10.1-53,25.5-79.6,51.1-14.6,14-31.7,32.8-43.9,48.2-9.9,12.5-24.2,33.8-23.7,35.4,0.4,1.3,26.4,12,41.3,17,15.7,5.3,56,15.2,69.2,17,6.2,0.9,17.7,1.6,25.5,1.6,27.2,0,42.9-6.5,50.5-20.8,1.8-3.3,3.2-6.6,3.2-7.3,0-2.4,11.2-29.4,17.2-41.4,3.3-6.6,13.7-25.5,23.1-42,23.1-40.7,28.1-52.3,26.2-62.1-0.9-4.8-5.9-9.9-11.1-11.3-6.1-1.5-17.1-2-25.7-1.1Z"/>
                <path fill="url(#grad2)" d="M184.86,285.1c1.7,29,12.1,63.5,29.2,96.9,7.8,15.3,14.8,25.5,23.3,34.1,10,9.9,16.8,13.4,26.6,13.4s15-2.8,24-11.9c16.2-16.5,28.5-49.1,28.5-75.6,0-9.6-1.4-14-5.2-17.2-4-3.4-19-11.2-31.8-16.6-18.3-7.8-84-31.7-92.9-33.9l-2.4-0.6.7,11.4Z"/>
            </g>
            <path fill="url(#grad2)" d="M189.66,216.6c-1.2,0.8-2.2,2.5-2.2,3.8,0,1.2-1.2,3.8-2.6,5.7-4.6,6.2-6.3,10.5-7.4,19.5-2,15.2-3.7,20.9-10.8,35.1-10.1,20.3-11.2,23.9-11.1,38.1,0.1,17,0.3,17.2,7.7,7.8,3.4-4.2,7.3-9.6,8.6-11.9,3.2-5.4,6.1-16.6,8.1-31.2,1.8-13.4,3.7-18.9,11.2-33.2,5-9.8,5.3-10.7,5.3-17.7,0-4.1,0.5-7.8,1-8.1,1.7-1,1.1-6.1-0.8-7.8-2.3-2.1-4.1-2.1-7,0.1Z"/>
        </svg>
    </div>

    <script>
        class ButterflyController {
            constructor(element) {
                this.element = element;
                this.currentAnimation = null;
                this.isAnimating = false;
            }

            generatePath() {
                const startX = Math.random() * window.innerWidth;
                const startY = Math.random() * window.innerHeight;
                const path = [];
                
                // 生成5个连贯路径点
                for(let i=0; i<5; i++){
                    path.push({
                        x: startX + Math.cos(i*0.5)*400 + (Math.random()-0.5)*200,
                        y: startY + Math.sin(i*0.7)*300 + (Math.random()-0.5)*200,
                        scale: 0.6 + Math.random()*0.4,
                        rotate: (Math.random()-0.5)*20
                    });
                }
                return path;
            }

            startFlight() {
                if(this.isAnimating) return;
                this.isAnimating = true;
                
                const path = this.generatePath().map(p => ({
                    transform: `translate(${p.x}px, ${p.y}px)
                               scale(${p.scale})
                               rotate(${p.rotate}deg)`,
                    opacity: 1
                }));

                // 入场动画
                this.element.animate([{opacity:0}, {opacity:1}], {
                    duration: 1000,
                    fill: 'forwards'
                });

                // 主飞行动画
                this.currentAnimation = this.element.animate(path, {
                    duration: 60000,
                    iterations: 1,
                    easing: 'ease-in-out'
                });

                this.currentAnimation.onfinish = () => {
                    this.element.animate([{opacity:1}, {opacity:0}], {
                        duration: 1000,
                        fill: 'forwards'
                    }).onfinish = () => {
                        this.isAnimating = false;
                        setTimeout(() => this.startFlight(), 1000);
                    };
                };
            }
        }

        // 初始化控制器
        const butterfly1 = new ButterflyController(document.getElementById('butterfly1'));
        const butterfly2 = new ButterflyController(document.getElementById('butterfly2'));

        // 启动动画
        butterfly1.startFlight();
        setTimeout(() => butterfly2.startFlight(), 1000);

        // 窗口适配
        window.addEventListener('resize', () => {
            butterfly1.startFlight();
            butterfly2.startFlight();
        });
    </script>
</body>
</html>